<head>
  <link rel="stylesheet" type="text/css" href="/stylesheets/book_index.css">
  <title>Athenaeum</title>
</head>

<div id="statistics">
<div class="jumbotron jumbotron-fluid">
  <div class="container">
    <h1 class="display-4">Athenaeum</h1>
    <a href="/books/new" id="Add Book"class="badge badge-secondary">Add Book</a>
    <p class="lead">
      <article class="book-stats">
        <div class="top-books">
          <h2>TOP BOOKS:</h2>
          <% @top_books.each do |book| %>
            <p><%= link_to book.title, book_path(book.id) %> - <%= book.average_rating.round %> <i class="fas fa-star"></i></p>
          <% end %>
        </div>
      </article>
      <article class="book-stats">
        <div class="lowest-books">
          <h2>LOWEST RATED BOOKS:</h2>
          <% @lowest_books.each do |book|%>
            <p><%= link_to book.title, book_path(book.id) %> - <%= book.average_rating.round %> <i class="fas fa-star"></i></p>
          <% end %>
        </div>
      </article>
      <article class="book-stats">
        <div class="top-users">
          <h2>TOP POWER USERS:</h2>
          <% @power_users.each do |user| %>
            <p><%= link_to user.name, user_path(user.id) %> - <%= user.review_count %> reviews!</p>
          <% end %>
        </div>
      </article>
    <div class="dropdown">
    <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      Sort by:
    </button>
    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
      <a class="dropdown-item" id="reviews-asc" href="?sort=reviews&order=asc">Review Count: Ascending</a>
      <a class="dropdown-item" id="reviews-desc" href="?sort=reviews&order=desc">Review Count: Descending</a>
      <a class="dropdown-item" id="ratings-asc" href="?sort=ratings&order=asc">Avg Rating: Ascending</a>
      <a class="dropdown-item" id="ratings-desc" href="?sort=ratings&order=desc">Avg Rating: Descending</a>
      <a class="dropdown-item" id="pages-asc" href="?sort=pages&order=asc">Page Count: Ascending</a>
      <a class="dropdown-item" id="pages-desc" href="?sort=pages&order=desc">Page Count: Descending</a>
    </div>
  </div>
</div>
</div>

<div class="books" id="indiv-book-stats">
  <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
    <div class="carousel-inner">
      <div class="carousel-item active">
        <p id="carousel-header">Loading library...<br><br><br></p>
      </div>
      <% @books.each do |book| %>
        <div class="carousel-item">
          <div class="book-<%= book.id %>" id="book-<%= book.id %>">
            <h2 class="book-title"><%= link_to book.title, book_path(book.id) %></h2>
            <img src="<%= book.img %>">
            <h3><%= book.average_review_score.round %> <i class="fas fa-star"></i></h3>
            <h3><%= book.total_reviews %> reviews</h3>
            by:<% book.authors.each do |author| %>
            <h2 class="author-name"><%= link_to author.name, author_path(author.id) %></h2>
            <% end %>
            <p><%=  book.pages %> pages</p>
            <p>Published in: <%=  book.published_year %></p>
          </div>
        </div>
      <% end %>
    </div>
  <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true" ></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
  </div>
</div>
